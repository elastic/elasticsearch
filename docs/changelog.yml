# Changelog Configuration
# This file configures the valid values for changelog fields using the pivot structure.
# Place this file as `changelog.yml` in the `docs/` directory

# Available products (optional - if not specified, all products from products.yml are allowed)
products:
  - elasticsearch
  - cloud-serverless
  # Add more products as needed

# Available lifecycle values (strongly typed: preview, beta, ga)
# lifecycles:
#   - preview
#   - beta
#   - ga

# Pivot configuration for types, subtypes, and areas with label mappings.
# By default we render entries grouped by type > subtype > area.
# NOTE: subtype and area are optional and either may be omitted.
# Labels are specified in a "label -> value" format
pivot:
  # Type definitions with optional labels
  # Keys are type names, values can be:
  #   - simple string: comma-separated label list (e.g., ">bug, >fix")
  #   - empty/null: no labels for this type
  #   - object: { labels: "...", subtypes: {...} } for breaking-change type only
  types:
    # Complex object form with subtypes (ONLY allowed for breaking-change)
    # Subtypes help categorize breaking changes by their nature
    breaking-change:
      labels: ">breaking"
      subtypes:
      #   api: ">api-breaking"
      #   behavioral: ">behavioral-breaking"
      #   configuration: ">config-breaking"
      #   dependency: ">dependency-breaking"
      #   subscription: ">subscription-breaking"
      #   plugin: ">plugin-breaking"
      #   security: ">security-breaking"
        other: ">breaking-java"
    # Simple string form: labels as comma-separated string
    bug-fix: ">bug"
    deprecation: ">deprecation"
    docs: ">docs, documentation"
    enhancement: "release_note:enhancement, >enhancement"
    feature: ">feature"
    known-issue: "release_note:known-issue" 
    regression: ">regression"
    security: "release_note:security"
    other: ">upgrade"

  # Area definitions with labels
  # Keys are area display names, values are label strings
  # Multiple labels can be comma-separated
  areas:
    # Example mappings - customize based on your label naming conventions
    Aggregations: ":Analytics/Aggregations"
    Allocation: ":Distributed Coordination/Allocation"
    Analysis: ":Search Relevance/Analysis"
    Application: ":EnterpriseSearch/Application"
    Audit: ":Security/Audit"
    Authentication: ":Security/Authentication"
    Authorization: ":Security/Authorization"
    Autoscaling: ":Distributed Coordination/Autoscaling"
    "CAT APIs": ":Data Management/CAT APIs"
    CCR: ":Distributed Indexing/CCR"
    CCS: ":Search Foundations/CCS"
    CRUD: ":Distributed Indexing/CRUD"
    Client: ":Security/Client"
    "Cluster coordination": ":Distributed Coordination/Cluster Coordination"
    Codec: ":StorageEngine/Codec"
    "Data streams": ":Data Management/Data streams, :StorageEngine/Data streams"
    DLM: ":Data Management/DLM"
    "Discovery-Plugins": ":Distributed Coordination/Discovery-Plugins"
    Distributed: ":Distributed Indexing/Distributed, :Distributed Coordination/Distributed"
    Downsampling: ":StorageEngine/Downsampling"
    Engine: ":Distributed Indexing/Engine, :Analytics/Compute Engine"
    "ES|QL": ":Search Relevance/ES|QL, :StorageEngine/ES|QL, :ml/ES|QL, :Analytics/ES|QL"
    EQL: ":Query Languages/EQL, :Analytics/EQL"
    Experiences: ":SearchOrg/Experiences"
    "Extract and transform": ":SearchOrg/Extract&Transform"
    # Features: TBD
    FIPS: ":Security/FIPS"
    Geo: ":Analytics/Geo"
    # Graph: TBD
    Health: ":Distributed/Health"
    Highlighting: ":Search Relevance/Highlighting"
    "ILM": ":StorageEngine/ILM, :Data Management/ILM+SLM"
    IdentityProvider: ":Security/IdentityProvider"
    "Indices APIs": ":Data Management/Indices APIs"
    Inference: ":SearchOrg/Inference"
    "Infra/CLI": ":Core/Infra/CLI"
    "Infra/Circuit breakers": ":Core/Infra/Circuit Breakers"
    "Infra/Core": ":Core/Infra/Core"
    # "Infra/Entitlements": ":Core/Infra/Entitlements"
    "Infra/Logging": ":Core/Infra/Logging"
    "Infra/Metrics": ":Core/Infra/Metrics"
    "Infra/Node lifecycle": ":Core/Infra/Node Lifecycle"
    "Infra/Plugins": ":Core/Infra/Plugins"
    "Infra/REST API": ":Core/Infra/REST API"
    "Infra/Resiliency": ":Core/Infra/Resiliency"
    "Infra/Scripting": ":Core/Infra/Scripting"
    "Infra/Settings": ":Core/Infra/Settings"
    "Infra/Transport API": ":Core/Infra/Transport API"
    # Ingest: TBD
    "Ingest node": ":Distributed/Ingest Node"
    "Java High Level REST Client": ":Clients/Java High Level REST Client"
    "Java Low Level REST Client": ":Clients/Java Low Level REST Client"
    License: ":Security/License"
    # Logging: TBD
    Logs: ":StorageEngine/Logs, StorageEngine/Logs"
    "Machine learning": ":ml"
    Mapping: ":StorageEngine/Mapping, :Search Foundations/Mapping"
    Monitoring: ":Core/Infra/Monitoring"
    Network: ":Distributed Coordination/Network"
    Packaging: ":Delivery/Packaging"
    Percolator: ":Search Relevance/Percolator"
    Performance: ":Performance"
    "Query languages": ":Query Languages/EQL, :Query Languages/SQL"
    Ranking: ":Search Relevance/Ranking"
    Recovery: ":Distributed Indexing/Recovery"
    Reindex: ":Distributed Indexing/Reindex"
    Relevance: ":Search Relevance/Search, :SearchOrg/Relevance"
    Rollup: ":StorageEngine/Rollup"
    Search: ":Search/Search, :Search Foundations/Search"
    "Searchable snapshots": ":Distributed Indexing/Searchable Snapshots"
    Security: ":Security/Security"
    SLM: ":Distributed/SLM, :Data Management/ILM+SLM"
    "Snapshot and restore": ":Distributed Coordination/Snapshot/Restore"
    SQL: ":Query Languages/SQL, :Analytics/SQL"
    Stats: ":Data Management/Stats"
    Store: ":Distributed Indexing/Store"
    Suggesters: ":Search Relevance/Suggesters"
    "Task management": ":Distributed Coordination/Task Management"
    TLS: ":Security/TLS"
    Transform: ":ml/Transform"
    TSDB: ":StorageEngine/TSDB"
    "Vector search": ":Search Relevance/Vectors"
    Watcher: ":Data Management/Watcher"

# Product-specific label blockers (optional)
# Maps product IDs to lists of labels that prevent changelog creation for that product
# If you run the changelog add command with the --prs option and a PR has any of these labels, the changelog is not created
# add_blockers:
#   elasticsearch,cloud-serverless:
#     - ">non-issue"
#     - ">test"
#     - ">refactoring"
#     - ":Delivery/Build"
#     - ":Delivery/Tooling"

# render_blockers:
#   cloud-serverless:
#     areas:
#       - Allocation
#       - Audit
#       - Authentication
#       - Autoscaling
#       - CCR
#       - CCS
#       - "Cluster Coordination"
#       - Codec
#       - "Discovery-Plugins"
#       - Engine
#       - FIPS
#       - Health
#       - "ILM+SLM"
#       - "IdentityProvider"
#       - "Infra/CLI"
#       - "Circuit Breakers"
#       - "Infra/Core"
#       - "Infra/Entitlements"
#       - "Infra/Logging"
#       - "Infra/Metrics"
#       - "Infra/Node Lifecycle"
#       - "Infra/Plugins"
#       - "Infra/Transport API"
#       - License
#       - Monitoring
#       - Packaging
#       - Searchable Snapshots
#       - "Snapshot/Restore"
#       - Stats
#       - Watcher
#     types:
#       - docs
#   elasticsearch:
#     types:
#       - docs

# Block configuration - combined create and publish blockers
block:
  # Global labels that block changelog creation for all products (comma-separated string)
  # create: ">non-issue, >test, >refactoring, :Delivery/Build, :Delivery/Tooling"
  # Block changelog entries from publishing based on entry type or area
  # publish:
    # types:
      # - docs
  #   areas:
  #     - "Internal"
  # Product-specific overrides (override global blockers, don't merge)
  # Dictionary key can be a single product ID or comma-separated product IDs
  product:
    'elasticsearch':
      create: ">non-issue, >test, >refactoring, :Delivery/Build, :Delivery/Tooling"
      publish:
        types:
          - docs
    'cloud-serverless':
      create: ">non-issue, >test, >refactoring, :Delivery/Build, :Delivery/Tooling"
      publish:
        areas:
          - Allocation
          - Audit
          - Authentication
          - Autoscaling
          - CCR
          - CCS
          - "Cluster coordination"
          - Codec
          - "Discovery-Plugins"
          - Engine
          - FIPS
          - Health
          - ILM
          - IdentityProvider
          - "Infra/CLI"
          - "Infra/Logging"
          - "Infra/Metrics"
          - "Infra/Node lifecycle"
          - "Infra/Plugins"
          - "Infra/Transport API"
          - License
          - Monitoring
          - Packaging
          - "Searchable snapshots"
          - SLM
          - "Snapshot and restore"
          - Stats
          - Watcher
        types:
          - docs
          - other
[#es-connectors-azure-blob]
=== Elastic Azure Blob Storage connector reference
++++
<titleabbrev>Azure Blob Storage</titleabbrev>
++++
// Attributes used in this file
:service-name: Azure Blob Storage
:service-name-stub: azure_blob_storage

The _Elastic Azure Blob Storage connector_ is a <<es-connectors,connector>> for https://azure.microsoft.com/en-us/services/storage/blobs/[Azure Blob Storage^].

This connector is written in Python using the {connectors-python}[Elastic connector framework^].

View the {connectors-python}/connectors/sources/{service-name-stub}.py[*source code* for this connector^] (branch _{connectors-branch}_, compatible with Elastic _{minor-version}_).

[discrete#es-connectors-azure-blob-availability-prerequisites]
==== Availability and prerequisites

[discrete]
===== Managed connector availability
* Available as a managed connector on Elastic Cloud as of *8.9.1*
* See <<es-native-connectors-prerequisites,managed connector requirements>>

[discrete]
===== Self-managed connector availability
* Available as a self-managed connector for Elastic versions *8.6.0+*
* See <<es-build-connector,self-managed connector requirements>>

[discrete#es-connectors-azure-blob-compatibility]
==== Compatibility

This connector has not been tested with Azure Government. Therefore we cannot guarantee that it will work with Azure Government endpoints. For more information on Azure Government compared to Global Azure, refer to the https://learn.microsoft.com/en-us/azure/azure-government/compare-azure-government-global-azure[official Microsoft documentation^].

[discrete#es-connectors-azure-blob-configuration]
==== Configuration

[discrete]
===== Required configuration fields

[cols="2,5"]
|===
|Field |Description

|`Azure Blob Storage account name`
|Name of Azure Blob Storage account.

|`Azure Blob Storage account key`
|https://learn.microsoft.com/en-us/azure/storage/common/storage-account-keys-manage?tabs=azure-portal[Account key^] for the Azure Blob Storage account.

|`Azure Blob Storage blob endpoint`
|Endpoint for the Blob Service.

|`Azure Blob Storage containers`
|List of containers to index. `*` will index all containers.
|===

[discrete]
===== Additional self-managed configuration fields

[NOTE]
====
The following fields are only available for self-managed connectors.
====

[cols="2,5,2"]
|===
|Field |Description |Default

|`Retries per request`
|Number of retry attempts after a failed call.
|`3`

|`Maximum concurrent downloads`
|Number of concurrent downloads for fetching content.
|`100`

|`Use text extraction service`
|Requires separate deployment of Elastic Text Extraction Service.
|`false`
|===

[discrete#es-connectors-azure-blob-create]
==== Creating a connector

[discrete]
.Create managed connector
[%collapsible]
=============
include::_connectors-create-native.asciidoc[]
=============

[discrete]
.Create self-managed connector
[%collapsible]
=============
include::_connectors-create-client.asciidoc[]
=============

[discrete]
.Docker deployment (self-managed only)
[%collapsible]
=============
include::_connectors-docker-instructions.asciidoc[]
=============

[discrete#es-connectors-azure-blob-documents-syncs]
==== Documents and syncs

The connector will fetch all data available in the container.

[NOTE]
====
* Content from files bigger than 10 MB:
** Managed connector: Content extraction not supported
** Self-managed connector: Can use the <<es-connectors-content-extraction-local, self-managed local extraction service>>
* Permissions are not synced. *All documents* indexed to an Elastic deployment will be visible to *all users with access* to that Elastic Deployment.
====

[discrete#es-connectors-azure-blob-sync-types]
===== Sync types

<<es-connectors-sync-types-full,Full syncs>> are supported by default for all connectors.

This connector also supports <<es-connectors-sync-types-incremental,incremental syncs>>.

[discrete#es-connectors-azure-sync-rules]
===== Sync rules

<<es-sync-rules-basic,Basic sync rules>> are identical for all connectors and are available by default.

Advanced sync rules are not available for this connector in the present version.
Currently filtering is controlled via ingest pipelines.

[discrete#es-connectors-azure-blob-content-extraction]
==== Content extraction

See <<es-connectors-content-extraction>>.

[discrete#es-connectors-azure-blob-testing]
==== Testing (self-managed only)

To perform E2E testing for the Azure Blob Storage connector, run:

[source,shell]
----
make ftest NAME=azure_blob_storage
----

For faster tests:
[source,shell]
----
make ftest NAME=azure_blob_storage DATA_SIZE=small
----

[discrete#es-connectors-azure-blob-known-issues]
==== Known issues

* `lease data` and `tier` fields are not updated in Elasticsearch indices because the blob timestamp is not updated.
Refer to https://github.com/elastic/connectors/issues/289[Github issue^].

[discrete#es-connectors-azure-blob-troubleshooting]
==== Troubleshooting

See <<es-connectors-troubleshooting>>.

[discrete#es-connectors-azure-blob-security]
==== Security

See <<es-connectors-security>>.
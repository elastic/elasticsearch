[[breaking-changes-5.1]]
== Breaking changes in 5.1

[[breaking_51_index_api_changes]]
[float]
=== Indices API changes

==== Alias names are validated against (most of) the rules for index names

Alias names are now validated against almost the same set of rules that validate
index names. The only difference is that aliases are allowed to have uppercase
characters. That means that aliases may not:

* Start with `_`, `-`, or `+`
* Contain `#`, `\`, `/`, `*`, `?`, `"`, `<`, `>`, `|`, ` `, `,`
* Be longer than 100 UTF-8 encoded bytes
* Be exactly `.` or `..`

Aliases created in versions before 5.1.0 are still supported but no new aliases
can be added that violate those rules. Since modifying an alias in elasticsearch
is removing it and recreating it atomically using the `_aliases` API, modifying
aliases with invalid names is also no longer supported.

[[breaking_51_java_api_changes]]
[float]
=== Java API changes

==== Log4j dependency has been upgraded

The Log4j dependency has been upgraded from version 2.6.2 to version 2.7. If you're using the transport client in your
application, you should update your Log4j dependencies accordingly.

[[breaking_51_cat_api]]
[float]
=== Cat API changes

==== Unbounded queue size in cat thread pool

Previously if a queue size backing a thread pool was unbounded, the cat thread pool API would output an empty string in
the queue_size column. This has been changed to now output -1 so that the output is always present and always numeric.
Note that if you're running in a mixed version cluster with 5.0.x and 5.1.y nodes, you will see different responses
from the cat thread pool API depending on the version of the node that your request hits.

[[breaking_51_plugin_api]]
[float]
=== Plugin API changes

==== UnicastHostsProvider now pull based

Plugging in a `UnicastHostsProvider` for zen discovery is now pull based. Implement a `DiscoveryPlugin` and override the `getZenHostsProviders` method. Selecting a hosts provider is also now done with a separate setting, `discovery.zen.hosts_provider`.

==== ZenPing and MasterElectService pluggability removed

These classes are no longer pluggable. Either implement your own discovery, or extend from ZenDiscovery and customize as necessary.

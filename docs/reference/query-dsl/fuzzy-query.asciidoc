[[query-dsl-fuzzy-query]]
=== Fuzzy Query

Returns documents that contain terms similar to the search term.

{es} measures similarity, or fuzziness, using a
http://en.wikipedia.org/wiki/Levenshtein_distance[Levenshtein edit distance]. An
edit distance is the number of one-character changes needed to turn one term
into another. These changes can include:

* Changing a character (**b**ox → **f**ox)
* Removing a character (**b**lack → lack)
* Inserting a character (sic → sic**k**)
* Transposing two adjacent characters (**ac**t → **ca**t)

To find similar terms, the `fuzzy` query creates a set of all possible
variations, or expansions, of the search term within a specified edit distance.
The query then returns exact matches for each expansion.

[[fuzzy-query-ex-request]]
==== Example request

[source,js]
----
GET /_search
{
    "query": {
        "fuzzy": {
            "user": {
                "value": "ki",
                "fuzziness": "AUTO",
                "max_expansions": 50,
                "prefix_length": 0,
                "transpositions": true,
                "rewrite": "constant_score"
            }
        }
    }
}
----
// CONSOLE

[[fuzzy-query-top-level-params]]
==== Top-level parameters for `fuzzy`
`<field>`::
Field you wish to search.

[[fuzzy-query-field-params]]
==== Parameters for `<field>`
`value`::
Term you wish to find in the provided `<field>`.

`fuzziness`::
Maximum edit distance used to create expansions. Optional. Valid values are:
+
--
`AUTO` (Default)::
Changes edit distance based on the length of the search term.
+
You can set a minimum and maximum edit distance using the
`AUTO:[minimum],[maximum]` syntax. The default value is `AUTO:3,6`, which uses
the following edit distances based on search term length:
+
* For search terms of 2 characters or less, terms must match exactly.
* For search terms of 3–5 characters, terms must match within a one edit
distance.
* For search terms greater than 5 characters, terms must match within a two edit
distance.

`0`:: No edits allowed. Terms must match exactly.

`1`:: Terms must match within one edit.

`2`:: Terms must match within two edits.
--

`max_expansions`::
Maximum number of variations created. Defaults to `50`. Optional. 
+
WARNING: Avoid using a high value in the `max_expansions` parameter, especially
if the `transpositions` parameter value is `0`. High values in the
`max_expansions` parameter can cause poor performance due to the high number of
variations examined.

`prefix_length`::
Number of beginning characters left unchanged when creating expansions.
Defaults to `0`. Optional. 

`transpositions`::
Indicates whether edits include transpositions of two adjacent characters (ab →
ba). Valid values are `true` (default) and `false`. Optional.

`rewrite` (Expert)::
Method used to rewrite the query. For valid values and more information, see the
<<query-dsl-multi-term-rewrite, `rewrite` parameter>>. Optional.
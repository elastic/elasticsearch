[[elastic-cloud-architecture]]
== Hot / Frozen - High Availability

The Hot-Frozen Elasticsearch cluster architecture is cost optimized for large time-series datasets while keeping all of the data **fully searchable**. There is no need to "re-hydrate" archived data. In this architecture, the hot tier is primarily used for indexing and immediate searching (1-3 days) with a majority of the search being handled by the frozen tier. Since the data is moved to searchable snapshots in an object store, the cost of keeping all of the data searchable is dramatically reduced.

This architecture is ideal for observability use cases. The architecture includes all the necessary components of the Elastic Stack and is not intended for sizing workloads, but rather as a basis to ensure the architecture you deploy is foundationally ready to handle any desired workload with resiliency. This architecture shows a very high level representation of data flow. For more details on that, see our https://www.elastic.co/guide/en/ingest/current/use-case-arch.html[Ingest Architectures].

The most important foundational step to any architecture is designing your deployment to be responsive to production workloads. For more information on planning for production, see https://www.elastic.co/guide/en/elasticsearch/reference/current/scalability.html[Get ready for production].

[discrete]
[[cloud-hot-use-case]]
=== Use case

This architecture is intended for organizations that need to do the following:

* Monitor the performance and health of their applications in real-time, including the creation and tracking of SLOs (Service Level Objectives).
* Provide insights and alerts using logs, metrics, traces, or events  to ensure optimal performance and quick issue resolution for applications 
* Apply Machine Learning and Artificial Intelligence to assist SREs and Application Teams in dealing with the large amount of data in this type of use case.
* Ensure resilience to hardware failures, and maintain availability during operational maintenance by defining zones or pods to enable smooth failure handling.
* Deploy the most cost effective architecture model that allows for maximum flexibility between storage cost and performance.



[discrete]
[[cloud-hot-frozen-architecture]]
=== Architecture

image::images/elastic-cloud-architecture.png["An Elastic Cloud Architecture"]

TIP: We use an Availability zones (AZ) concept in the architecture above.  When running in your own Data center (DC) you can equate AZs to racks or even separate physical machines.

The diagram illustrates an Elasticsearch cluster deployed in Elastic Cloud across 3 availability zones. For production, we recommend a minimum of 2 availability zones and 3 availability zones for mission critical applications. See https://www.elastic.co/guide/en/cloud/current/ec-planning.html[Plan for Production] for more details.   Note that even if the cluster is deployed across only two availability zones, a third master node is still required for quorum voting and will be created automatically in the third availability zone.   

The number of data nodes shown for each tier (hot and frozen) is illustrative and would be scaled up depending on ingest volume and retention period (see the example below).   Hot nodes contain both primary and replica shards. By default, primary and replica shards are always guaranteed to be in different availability zones. Frozen nodes rely on a large high-speed cache and retrieve data from the Snapshot Store as needed.

Machine learning nodes are optional but highly recommended for large scale time series use cases since the amount of data quickly becomes too difficult to analyze without applying techniques such as machine learning based anomaly detection.

[discrete]
[[cloud-hot-frozen-configuration]]
=== Recommended Hardware Specifications

Elastic Cloud allows you to deploy clusters in AWS, Azure and Google Cloud.  Available hardware types and configurations vary across all three cloud providers but each provides instance types that meet our recommendations for the node types used in this architecture:

For more details on these instance types, see our documentation on Elastic Cloud hardware for https://www.elastic.co/guide/en/cloud/current/ec-default-aws-configurations.html[AWS], https://www.elastic.co/guide/en/cloud/current/ec-default-azure-configurations.html[Azure], and https://www.elastic.co/guide/en/cloud/current/ec-default-gcp-configurations.html[GCP].

[cols="10, 10, 10, 10, 10"]
|===
| **T*ype** | **AWS** | **Azure** | **GCP** | **Physical**
|image:images/hot.png["An Elastic Cloud Architecture"] | 
c6gd |
f32sv2|


N2|
32 vCPU +
64 GB RAM +
2-5 NVMe SSD

|image:images/frozen.png["An Elastic Cloud Architecture"]
| 
i3en
|
e8dsv4
|
N2|
8 vCPU +
64 GB RAM +
2-5 NVMe SSD
|image:images/machine-learning.png["An Elastic Cloud Architecture"]
| 
m6gd
|
f32sv2
|
N2|
32 vCPU +
32 GB RAM +
2-5 NVMe SSD
|image:images/master.png["An Elastic Cloud Architecture"]
| 
c6gd
|
f32sv2
|
N2|
8 vCPU +
64 GB RAM +
2-5 NVMe SSD
|image:images/kibana.png["An Elastic Cloud Architecture"]
| 
c6gd
|
f32sv2
|
N2|
8 vCPU +
64 GB RAM +
2-5 NVMe SSD
|===

[discrete]
[[cloud-hot-frozen-considerations]]
=== Important considerations

The following are important considerations for this architecture:

* Frozen tiers are read-only. Once data rolls over to the frozen tier, documents can no longer be updated. If you need to update documents for some part of the data lifecycle, you will need either:
** A larger https://www.elastic.co/guide/en/elasticsearch/reference/current/data-tiers.html#hot-tier[hot tier], or 

** A https://www.elastic.co/guide/en/elasticsearch/reference/current/data-tiers.html#warm-tier[warm tier] to cover the time period needed for document updates.

* This architecture uses a Hot/Frozen architecture. If you require https://www.elastic.co/guide/en/security/current/about-rules.html[detection rule lookback] or complex dashboards you may need to leverage a https://www.elastic.co/guide/en/elasticsearch/reference/current/data-tiers.html#cold-tier[cold tier].

* Only a single copy of (some of â€¦ i.e. the most recently written data that is not yet part of a snapshot) data exists during maintenance windows - (Note:  This could be addressed by adding data nodes to POD 3 and setting the sharding strategy to 1 Primary and 2 Replicas)

* Maintenance should be performed one availability zone at a time.

[discrete]
[[cloud-architecture-limitations]]
=== Limitations of this architecture
* This architecture is not intended as a https://www.elastic.co/guide/en/elasticsearch/reference/current/xpack-ccr.html#ccr-disaster-recovery[disaster recovery] architecture since it is deployed across Availability Zones in a single cloud region.

[discrete]
[[cloud-hot-frozen-resources]]
=== Resources and references

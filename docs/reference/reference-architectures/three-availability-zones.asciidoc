[[three-availability-zones]]
== Self Managed - High Availability - Single Region
++++
<titleabbrev>Self Managed - High Availability - Single Region</titleabbrev>
++++

This article outlines a scalable and highly available architecture for Elasticsearch using three availability zones. 

TIP: This architecture includes all the essential components of the Elastic Stack. It's designed to ensure your deployment has a stable foundation, based on expert recommendations, but is not intended for sizing workloads.

The most important foundational step to any architecture is designing your deployment to be responsive to production workloads. For more information on planning for production, see https://www.elastic.co/guide/en/elasticsearch/reference/current/scalability.html[Get ready for production].

[discrete]
[[three-availability-zones-use-case]]
=== Use case

This architecture is intended for organizations that need to do the following: 

* Be resilient to unplanned outages
* Ensure availability during operational maintenance of any given availability zone 

[discrete]
[[three-availability-zones-architecture]]
=== Architecture

image::images/three-availability-zone.png["A three-availability-zones time-series architecture"]

[discrete]
[[three-availability-zones-configuration]]
=== Example configuration

The following is a sample configuration with the following specifications:

* An ingest rate of 1TB/day
* 1 day in the hot tier
* 89 days in the frozen tier
* A total of 90 days of searchable data

* Hot tier: 120G RAM (2 60G RAM node x 3 availability zones)
* Frozen tier: 120G RAM (1 60G RAM node x 3 availability zones)
* Machine learning: 128G RAM (1 64G node x 3 availability zones)
* Master nodes: 24G RAM (8G node x 3 availability zones)
* Kibana: 16G RAM (16G node x 3 availability zone)

[discrete]
[[three-availability-zones-considerations]]
=== Important considerations

The following are important considerations for this architecture:

* You may require more than one copy of the most recently written data to be available. To achieve this, add data nodes to pod 3 and set the https://www.elastic.co/guide/en/elasticsearch/reference/current/size-your-shards.html#create-a-sharding-strategy[sharding strategy] to 1 primary and 2 replicas.
* Maintenance should be performed one pod at a time.
* A yellow cluster state is acceptable during maintenance. This is due to the replica shards being unassigned.

[discrete]
[[three-zone-limitations]]
=== Limitations of this architecture
* No region resilience
* During maintenance windows, only a single copy of the latest data not yet captured in a snapshot is available.
* This design assumes the data is written once and not updated.

[discrete]
[[three-availability-zones-resources]]

=== Resources and references




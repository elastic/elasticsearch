[[vm-max-map-count]]
=== Virtual memory

Elasticsearch uses a <<mmapfs,`mmapfs`>> directory by default to store
its indices. 

Checking operating system limits on mmap counts might be
advisable, otherwise running Elastic may result in out of memory exceptions.

NOTE: On recent Linux distribution versions this limit should be
sufficient. +
The RPM and Debian packages will configure this setting automatically. In
such case, no further configuration is required.

To confirm the limits on Linux, you can run the following command:

[source,sh]
-------------------------------------
sysctl vm.max_map_count
-------------------------------------

If needed, you can increase the limits by running the following command as
`root`:

[source,sh]
-------------------------------------
sysctl -w vm.max_map_count=262144
-------------------------------------

To set this value permanently, update the `vm.max_map_count` setting in
`/etc/sysctl.conf`. To verify after rebooting, run `sysctl vm.max_map_count`.

You can find out the current mmap count of a running Elasticsearch process
using the following command, where `$PID` is the process ID of the running
Elasticsearch process:

[source,sh]
----------------------------
wc -l /proc/$PID/maps
----------------------------

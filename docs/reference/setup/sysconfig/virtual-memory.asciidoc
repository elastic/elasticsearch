[[vm-max-map-count]]
=== Virtual memory

Elasticsearch uses a <<mmapfs,`mmapfs`>> directory by
default to store its indices. The default operating system limits on mmap
counts is likely to be too low, which may result in out of memory exceptions.

On Linux, you can increase the limits by running the following command as
`root`:

[source,sh]
-------------------------------------
sysctl -w vm.max_map_count=262144
-------------------------------------

To set this value permanently, update the `vm.max_map_count` setting in
`/etc/sysctl.conf`. To verify after rebooting, run `sysctl vm.max_map_count`.

The RPM and Debian packages will configure this setting automatically. No
further configuration is required.

You can find out the current mmap count of a running Elasticsearch process
using the following command, where `$PID` is the process ID of the running
Elasticsearch process:
[source,sh]
----------------------------
wc -l /proc/$PID/maps
----------------------------

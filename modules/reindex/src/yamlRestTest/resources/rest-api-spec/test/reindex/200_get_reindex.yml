---
"Get reindex task by task id":
  - requires:
      capabilities:
        - method: GET
          path: /_reindex/{task_id}
          capabilities: [reindex_resilience]
      test_runner_features: [capabilities]
      reason: "Reindex resilience capability required to run test"

  - do:
      index:
        index:   source
        refresh: true
        body:    { "text": "test" }

  - do:
      reindex:
        wait_for_completion: false
        body:
          source:
            index: source
          dest:
            index: dest
  - is_true: task
  - set: { task: taskId }

  - do:
      reindex_get:
        task_id: taskId
        wait_for_completion: true
  - is_true: completed
  - is_true: response

---
"Reindex task not found":
  - requires:
      capabilities:
        - method: GET
          path: /_reindex/{task_id}
          capabilities: [reindex_resilience]
      test_runner_features: [capabilities]
      reason: "Reindex resilience capability required to run test"
  - do:
      catch: missing
      reindex_get:
        task_id: "nonexistent:99999"

{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "github>elastic/renovate-config:base",
    "github>elastic/renovate-config:ci-agent-images",
    ":disableDependencyDashboard"
  ],
  "schedule": [
    "after 1pm on tuesday"
  ],
  "labels": [
    ">non-issue",
    ":Delivery/Packaging",
    ":Delivery/Build",
    "Team:Delivery",
    "auto-merge-without-approval"
  ],
  "baseBranches": [
    "main",
    "9.3",
    "9.2",
    "9.1",
    "8.19"
  ],
  "hostRules": [
    {
      "matchHost": "registry1.dso.mil",
      "hostType": "docker",
      "username": "{{secrets.IRON_BANK_USER}}",
      "password": "{{secrets.IRON_BANK_TOKEN}}"
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": ["^distribution/docker/src/docker/dockerfiles/ironbank/Dockerfile$"],
      "matchStrings": [
        "ARG BASE_IMAGE=(?<depName>\\S+)[\\s\\S]*?ARG BASE_TAG=(?<currentValue>\\S+)"
      ],
      "datasourceTemplate": "docker",
      "registryUrlTemplate": "https://registry1.dso.mil"
    }
  ],
  "packageRules": [
    {
      "description": "Don't manage dependencies by default",
      "matchPackageNames": [
        "*"
      ],
      "enabled": false
    },
    {
      "description": "Explicitly enable Elastic Docker updates",
      "matchPackageNames": [
        "/docker.elastic.co/.*/"
      ],
      "enabled": true
    }
  ]
}

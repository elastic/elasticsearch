clamp_of_double_no_grouping
required_capability: ts_command_v0

TS k8s
| STATS full_clamped_cost=sum(clamp(network.cost, 1, 2)), clamped_cost=sum(clamp_max(network.cost, 1)), clamped_min_cost=sum(clamp_min(network.cost, 10)) BY time_bucket = bucket(@timestamp,1minute)
| SORT full_clamped_cost DESC, time_bucket DESC | LIMIT 10;

full_clamped_cost:double | clamped_cost:double | clamped_min_cost:double | time_bucket:datetime
18.0                     | 9.0                 | 94.875                  | 2024-05-10T00:09:00.000Z
15.25                    | 8.0                 | 84.125                  | 2024-05-10T00:08:00.000Z
15.0                     | 8.0                 | 83.5                    | 2024-05-10T00:15:00.000Z
13.75                    | 7.0                 | 71.625                  | 2024-05-10T00:22:00.000Z
13.125                   | 7.5                 | 90.5                    | 2024-05-10T00:18:00.000Z
13.0                     | 6.5                 | 75.625                  | 2024-05-10T00:17:00.000Z
12.0                     | 5.875               | 70.0                    | 2024-05-10T00:20:00.000Z
12.0                     | 6.125               | 70.0                    | 2024-05-10T00:14:00.000Z
12.0                     | 6.0                 | 61.25                   | 2024-05-10T00:13:00.000Z
12.0                     | 6.0                 | 60.0                    | 2024-05-10T00:02:00.000Z

;

clamp_of_long
required_capability: ts_command_v0
// tag::clamp[]
TS k8s 
| STATS bytes_in = sum(network.bytes_in),
        // our network cards are rate-limited to 200bps so we clamp to that (just an example)
        clamped_network_bytes_in = sum(clamp(network.bytes_in, 0, 200))
        BY time_bucket = bucket(@timestamp,1minute)
// end::clamp[]
| SORT time_bucket, bytes_in DESC | LIMIT 10;

// tag::clamp-result[]
bytes_in:long | clamped_network_bytes_in:long | time_bucket:datetime
1849          | 600                           | 2024-05-10T00:00:00.000Z
2334          | 800                           | 2024-05-10T00:01:00.000Z
3487          | 1178                          | 2024-05-10T00:02:00.000Z
2941          | 861                           | 2024-05-10T00:03:00.000Z
// end::clamp-result[]
1557          | 403                           | 2024-05-10T00:04:00.000Z
1144          | 434                           | 2024-05-10T00:05:00.000Z
3594          | 1200                          | 2024-05-10T00:06:00.000Z
1353          | 401                           | 2024-05-10T00:07:00.000Z
3188          | 1295                          | 2024-05-10T00:08:00.000Z
3850          | 1468                          | 2024-05-10T00:09:00.000Z





;

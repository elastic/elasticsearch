#
# Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one
# or more contributor license agreements. Licensed under the Elastic License
# 2.0; you may not use this file except in compliance with the Elastic License
# 2.0.
#
---
"Test semantic_text falls back to ML node model when EIS is not available":

  - do:
      indices.create:
        index: test_semantic_text_ml_fallback
        body:
          mappings:
            properties:
              my_semantic_field:
                type: "semantic_text"

  - do:
      indices.get_mapping:
        index: test_semantic_text_ml_fallback

  - match: { test_semantic_text_ml_fallback.mappings.properties.my_semantic_field.inference_id: ".elser-2-elasticsearch" }

  - do:
      indices.delete:
        index: test_semantic_text_ml_fallback

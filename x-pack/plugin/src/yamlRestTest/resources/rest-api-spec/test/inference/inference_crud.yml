---
"Test get missing model":
  - do:
      catch: missing
      inference.get:
        inference_id: inference_to_get
  - match: { error.type: "resource_not_found_exception" }
  - match: { error.reason: "Inference endpoint not found [inference_to_get]" }

---
"Test put inference with bad task type":
  - do:
      catch: bad_request
      inference.put:
        inference_id: elser_model
        body: >
          {
            "task_type": "bad",
            "service": "elser",
            "service_settings": {
              "num_allocations": 1,
              "num_threads": 1
            },
            "task_settings": {
            }
          }
  - match: { error.reason: "Unknown task_type [bad]" }

---
"Test inference with bad task type":
  - do:
      catch: bad_request
      inference.inference:
        task_type: bad
        inference_id: elser_model
        body: >
          {
            "input": "important text"
          }
  - match: { error.reason: "Unknown task_type [bad]" }

---
"Test get all":
  - do:
      inference.get:
        inference_id: "*"
  - length: { endpoints: 1}
  - match: { endpoints.0.inference_id: ".elser-2" }

  - do:
      inference.get:
        inference_id: _all
  - length: { endpoints: 1}
  - match: { endpoints.0.inference_id: ".elser-2" }

  - do:
      inference.get:
        inference_id: ""
  - length: { endpoints: 1}
  - match: { endpoints.0.inference_id: ".elser-2" }


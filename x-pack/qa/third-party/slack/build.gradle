import org.elasticsearch.gradle.internal.info.BuildParams

apply plugin: 'elasticsearch.internal-yaml-rest-test'

dependencies {
  yamlRestTestImplementation project(':x-pack:qa:third-party')

  clusterModules project(xpackModule('watcher'))
  clusterModules project(xpackModule('ilm'))
}

restResources {
  restApi {
    include '_common', 'cluster', 'indices', 'search', 'watcher'
  }
}

String slackUrl = System.getenv('slack_url')

if (!slackUrl) {
  tasks.named("yamlRestTest").configure { enabled = false }
}

if (buildParams.inFipsJvm){
  // Test clusters run with security disabled
  tasks.named("yamlRestTest").configure{enabled = false }
}

apply plugin: 'elasticsearch.java'
apply plugin: 'elasticsearch.cache-test-fixtures'
apply plugin: 'elasticsearch.deploy-test-fixtures'

dockerFixtures {
  idp {
    dockerContext = file("src/main/resources/idp")
    version = "1.2"
    baseImages = ["openjdk:11.0.16-jre"]
  }
  httpproxy {
    dockerContext = file("src/main/resources/nginx")
    version = "1.0"
    baseImages = ["nginx:1.27.1"]
  }
  oidc {
    dockerContext = file("src/main/resources/oidc")
    version = "1.0"
    baseImages = ["c2id/c2id-server-demo:16.1.1", "eclipse-temurin:17-noble"]
  }
  openldap {
    dockerContext = file("src/main/resources/openldap")
    version = "1.0"
    baseImages = ["osixia/openldap:1.4.0"]
  }
}

dependencies {
  testImplementation project(':test:framework')
  api project(':test:fixtures:testcontainer-utils')
  api "junit:junit:${versions.junit}"

  runtimeOnly "net.java.dev.jna:jna:${versions.jna}"
}
